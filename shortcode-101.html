<!doctype html>
<html>
   <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="chrome=1">
      <title>Shortcode 101 - Opencart Shortcodes</title>

      <link rel="stylesheet" href="stylesheets/styles.css">
      <link rel="stylesheet" href="stylesheets/pygment_trac.css">
      <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
      <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->
   </head>
   <body>
      <div class="wrapper">
         <header>
            <h1>Opencart Shortcodes</h1>
            <p>Shortcodes for OpenCart.</p>

            <ul class="menu">
               <li><a href="index.html">Home</a></li>
               <li><a href="install.html">Installation</a></li>
               <li><a href="shortcode-101.html">Shortcode 101</a></li>
               <li><a href="shortcode-default.html">Default Shortcodes</a></li>
               <li><a href="shortcode-extend.html">Extend Shortcodes</a></li>
               <li><a href="changelog.html">Changelog</a></li>
               <li><a href="license.html">License</a></li>
            </ul>
            
            <div class="download-project" data-html="inc_download"></div>
         
            <div class="footer"><small>Theme based on <a href="https://github.com/orderedlist/minimal">minimal</a></small></div>
         </header>
         
         <section>
            <h1>Shortcode 101</h1>

            <p>OpenCart shortcodes based on WordPress shortcodes API and share similiar format. The first modification of WordPress shortcodes is by <a href="http://forum.opencart.com/viewtopic.php?f=23&amp;t=110892">rempong</a> at OpenCart forum. We learn, modificate and extend it into more robust implementation. </p>

            <p>In quick explanation, when a shortcode is inserted in a OpenCart post or page, it is replaced with some other content. In other words, we instruct OpenCart to find the macro that is in square brackets ( <code>[ ]</code> ) and replace it with the appropriate dynamic content, which is produced by a PHP function. Makes it easy to insert advanced content into OpenCart.</p>
            
            <p>You can use shortcodes into all content input like product description, category, information, welcome module or even at template (.tpl) file.</p>
            
            <h3><a name="format" class="anchor" href="#format"><span class="octicon octicon-link"></span></a>Format</h3>

            <p>Shortcodes available in to type:</p>
            
            <p><strong>Self-closing:</strong></p>

            <pre>[<span class="text-red">link_product</span> <span class="text-blue">id="x" path="xy_xz"</span> /]</pre>

            <p><strong>Enclosing:</strong></p>

            <pre>[<span class="text-red">link_product</span> <span class="text-blue">id="x" path="xy_xz"</span>]<span class="text-green">custom text</span>[/<span class="text-red">product_link<span class="text-red">]</pre>

            <p>Shortcode contain three parameters that passed to the shortcode callback function.</p>

            <ol>
               <li><strong>Tag</strong> : link_product</li>
               <li><strong>Arguments</strong> : id, path</li>
               <li><strong>Content</strong> : "custom text" </li>
            </ol>
            
            
            <h3><a name="scripting" class="anchor" href="#scripting"><span class="octicon octicon-link"></span></a>Scripting</h3>
            
            <p>Shortcodes class is designed to extend controller, means you can use most of OpenCart API within shortcode function. Including but not limited to load model, load language, get route, get user info, get store id, even load MVC child.</p>
            <p>Default shorcodes (<code>system/helper/shortcodes_default.php</code>) is purposely to give you example what you can do with shortcode. But now let's understand how <strong>tag-arguments-content</strong> used to develope shortcodes.</p>
            
            <h4><a name="tag" class="anchor" href="#tag"><span class="octicon octicon-link"></span></a>Tag</h4>
            <p>Tag (or shortcode) name is referring to function name, should be all lowercase, letters or numbers and underscores. The same tag name will overwrite the previous one; with sequence default-extensions-themes shortcodes (more explanation at <a href="shortcode-extend.html">extend shortcodes</a>)</p>
<pre>
function <span class="text-red">link_product</span>($atts, $content = '') {
   ... ...
}
</pre>
            <h4><a name="attributes" class="anchor" href="#attributes"><span class="octicon octicon-link"></span></a>Attributes</h4>
            <p>Attributes describe option of shortcode. By combining attributes, the shortcode can be simple or very complex. Inside shortcode, it is mandatory to set default value to register the attirubbutes and as fallback value.</p>
            <p>There is two method to parse the attributes as code below.</p>
<pre>
function link_product(<span class="text-red">$atts</span>, $content = '') {
   <span class="text-green">// method one</span>
   <span class="text-red">extract($this->shortcodes->shortcode_atts(array(
      'id'     => 0,
      'path'   => 0,
      'brand'  => 0
   ), $atts));</span>
   
   if (<span class="text-red">$id</span>) {
      ... ...
   }
   
   <span class="text-green">// method two</span>
   <span class="text-red">$data = $this->shortcodes->shortcode_atts(array(
      'id'     => 0,
      'path'   => 0,
      'brand'  => 0
   ), $atts);</span>
   
   if (<span class="text-red">$data['id']</span>) {
      ... ...
   }
}
</pre>
<p>The suggestion to use is the first method.</p>

            <h4><a name="content" class="anchor" href="#content"><span class="octicon octicon-link"></span></a>Content</h4>
            
            <p>Content included in the return value without any escaping or encoding, the user can include raw HTML:</p>
            
            <pre>[caption]&lt;a href="http://example.com/">My Caption</a>[/caption]</pre>
            
            <p>Which would produce:</p>
            
            <pre>&lt;span class="caption">&lt;a href="http://example.com/">My Caption&lt;/a>&lt;/span></pre>
            
            <p>The shortcode parser uses a single pass on the post content. This means that if the $content of a shortcode contains another shortcode, it won't be parsed.</p>
            <p>If the enclosing shortcodes designed to allow another shortcode to be parsed, the handler function need to use <code>$this->shortcodes->do_shortcode()</code></p>
<pre>
function shortcodes ($atts, content = '') {
   return '&ltspan class="shortcodes">' . <span class="text-red">$this->shortcodes->do_shortcode(<span class="text-green">$content</span>)</span> . '&lt/span>';
}
</pre>
            <h3><a name="limitation" class="anchor" href="#limitation"><span class="octicon octicon-link"></span></a>Limitation</h3>
            
            <h4><a name="unclosed" class="anchor" href="#unclosed"><span class="octicon octicon-link"></span></a>Unclosed Shortcodes</h4>

            <p>Common usage of self-closing shortcodes (refer to WordPress user) is without "/". It's not a good practice because it will give you an issue when using multiple self-closing and enclosing at same post.</p>

<pre>
[tag]
[tag]
CONTENT
[/tag]
</pre>

            <p>Keep consist to write self-closing shortcode with "/" and it works.</p>

<pre>
[tag /]
[tag]
CONTENT
[/tag]
</pre>

            <h4><a name="ckeditor-html" class="anchor" href="#ckeditor-html"><span class="octicon octicon-link"></span></a>CKEditor Behaviour</h4>

            <p>CKeditor tend to put a formatting code or html entities into shortcodes that make it not work.</p>

            <p>What we see on editor:</p>

            <pre>[link_product id="42" /]</pre>

            <p>When we see the source code:</p>

            <pre>[link_product&amp;nbsp;id="42" /]</pre>

            <p>Extra <code>&amp;nbsp;</code> at code above make shortcodes fails.</p>
         </section>
      </div>
      
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
      <script>window.jQuery || document.write('<script src="javascripts/jquery-2.0.3.min.js"><\/script>')</script>
      <script src="javascripts/microTplEngine.js"></script>
      <script src="javascripts/scale.fix.js"></script>
      <script type="text/javascript">
         var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
         document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
      </script>
      <script type="text/javascript">
         try {
            var pageTracker = _gat._getTracker("UA-44563939-1");
         pageTracker._trackPageview();
         } catch(err) {}
      </script>
   </body>
</html>